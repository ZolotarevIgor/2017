# Краткое руководство по языку Matlab

## Работа в консоли, выполнение скриптов.

Работа в интерактивном интерпритаторе выполняется так же, как и при обычном наборе скриптов. Пишите выражение, оно выполняется. Если не указывать переменную, в которую записывается результат операции, то он будет записан в глобальную переменную `ans`. Чтобы запретить вывод результата выражения, нужно добавить после него `;`.
Команды для очистки экрана и переменных:

* `clc` - очистить экран

* `clear var_name1 ... var_nameN` - очистить переменные `var_name1 ... var_nameN`

* `clear all` - очистить все переменные

* `clr` - `clear all; close all; clc;`

## Наиболее часто использующиеся типы данных и создание переменных

Наиболее используемые типы данных в Matlab:

* Число с плавающей точкой *double* 

  * `x = 5;`

* Строка *string*

  * `x = "string";`

  Расширение GNU Octave:

  * `x = 'string';`

* *Матрица* - все типы данных хранятся в матричной форме

  * `x = [ 0 1 2];` - матрица 1х3

  * `x = 1;` - матрица 1х1

  * `x = [ 0 1 2; 3 4 5; 6 7 8];` - матрица 3x3

* Указатель на функцию *function_handle*

  * более подробно рассмотрен в разделе "Создание и работа с функциями"

## Операции над переменными

Matlab поддерживает следующие операции:

1. Арифметические операции

* `a + b` - сложение матриц одной размерности

* `a - b` - вычитание матриц одной размерности

* `a * b` - умножение, где a - матрица NхM, b - матрица MxL

* `a .* b` - поэлементное умножение матриц

* `a ^ b` - возведение в степень, где a - матрица NхN, b - матрица 1х1

* `a.^b` - поэлементное возведение матрицы в степень

* `a / b` - деление матриц слева направо

* `a \ b` - деление матриц справа налево

* `a ./ b` - поэлементное деление слева направо

* `a .\ b` - поэлементное деление справа налево 

* `sqrt(x)` - квадратный корень

Расширения GNU Octave:

* инкремент: `x++`, `++x`

* декремент: `x--`, `--x`

* операции с присвоением: `+=`, `-=`, `*=`, `\=`

2. Операции отношения

* равно: `==`

* не равно: `~=`

* меньше: `<`

* больше: `>`

* меньше или равно: `<=`

* больше или равно: `>=`

3. Логические операции

* И: `&`

* ИЛИ: `|`

* НЕ: `~`

* исключающее ИЛИ: `xor(a, b)`

3. Тригонометрические функции

* обычные: `sin(x), cos(x), tan(x), cot(x), sec(x), csc(x)` 

* обратные: `asin(x), acos(x), atan(x), acot(x), asec(x), acsc(x)`

* гиперболические: `sinh(x), cosh(x), tanh(x), coth(x), sech(x), csch(x)`

* обратные гиперболические: `asinh(x), acosh(x), atanh(x), acoth(x), asech(x), acsch(x)`

4. Экспоненциальные и логарифмические функции

* по основанию e: `exp(x), log(x)`

* по основанию 10: `log10(x)`

* по основанию 2: `log2(x), pow2(x)`

5. Округление и остаток от деления

* `fix(x)` Округление до ближайшего целого в сторону нуля 

* `floor(x)` Округление до ближайшего целого в сторону отрицательной бесконечности 

* `ceil(x)` Округление до ближайшего целого в сторону положительной бесконечности 

* `round(x)` Округление до ближайшего целого 

* `mod(x)` Остаток от целочисленного деления с учетом знака 

* `rem(x)` Остаток от целочисленного деления по модулю 

* `sign(x)` Определение знака числа

* `abs(x)` Модуль числа

6. Операции с массивами - нумерация начинается с 1

* `array(i, j, ...)` - вернет элемент (i, j, ...)

* `array(:, j)` - вернет столбец j массива array

* `[ a b ]` - конкатенация массивов

* `A'` - траспонирует матрицу A

* `zeros(M,N)` - генерирует нулевую матрицу MxN

* `eye(N, M)` - генерирует матрицу NxM, у которой на диагонали k стоят единицы (k>0 - верхние диагонали отностиельно центральной, k<0 - нижние), а на всех остальных местах нули

* `ones(M, N)` - генерирует матрицу MxN из единиц

7. Работа со специальными значениями

* `NaN` - не число

* `Inf` - бесконечность

* `isnan(x)` - проверка на NaN

* `isinf(x)` - проверка на Inf

* `pi` - число Пи

## Операции вывода на экран

|Функция | Параметры | Описание|
|--- | --- | ---|
|`disp(x)` | Переменная | Вывод х на экран|
|`fprintf(formatSpec,A1,...,An)` | A1,..., An - переменные, formatSpec - формат вывода | Форматированный вывод переменных A1,..., An|

## Циклы и условные переходы

* Условие:

```matlab
if expression
    statements
else
    statements
...
else
    statements
end
```

* Switch-case:

```matlab
switch switch_expr
    case case_expr1
        statement, ..., statement
    ...
    case case_exprn
        statement, ..., statement
    otherwise
        statement, ..., statement
end
```

* Цикл for (values - вектор значений):

```matlab
for index = values
   statements
end
```

* Цикл While:

```matlab
while condition
   statements
end
```

Расширения GNU Octave:

* Цикл do-while:
```perl
do
   statements
until (condition)
```

## Создание функций

Функции должны создаваться в отдельном файле с расширением *.m*. Для примера ниже: *out1, ..., outN* - выходные параметры, *myfun* - название функции, *in1, ..., inN* - входные параметры

```matlab
function [out1,out2, ..., outN] = myfun(in1,in2,in3, ..., inN)
    statements
end
```

## Функции построения графиков

Наиболее часто использующуеся функции для построения графиков:

|Функция | Параметры | Описание| 
|--- | --- | ---|
|`figure(number)` | Номер окна для графика | Создать окно для фигуры №number. Не обязательная команда, если используется только одно окно для графика|
|`grid` | on / off | Показать клетки на графике|
|`hold` | on / off | Не стирать старые графики. По умолчанию каждый новый график затирает все предыдущее|
|`axis([xmin, xmax,  ymin,  ymax])` | масштабы по осям координаты | выставить масштабы графика|
|`title(title)` | Строка заголовка | Вывести заголовок графика|
|`xlabel(x)` | Строка подписи | Вывести подпись к оси x|
|`ylabel(y)` | Строка подписи | Вывести подпись к оси y|
|`legend(legend1,...,legendN)` | Строки, описывающие график | Вывести легенду на график|
|`plot(X1,Y1,LineSpec1,...,Xn,Yn,LineSpecN)` | пары (X, Y) - массивы точке x и y соответственно, массивы должны быть одной размерности, LineSpec - спецификации графиков | Нарисовать график по точкам |
|`plot3(X1,Y1,Z1,LineSpec,...)` | пары (X, Y, Z) - массивы точке x, y и z соответственно, массивы должны быть одной размерности, LineSpec - спецификации графиков | Нарисовать трехмерный график по точкам|
|`mesh(X,Y,Z)` | Массивы точек | Нарисовать трехмерную поверхность, окраска зависит от значений|
|`loglog(x, y)` | массивы переменных | логарифмический масштаб|
|`polar(phi,r)` | массивы переменных | полярные координаты|
|`stairs(x,y)` | массивы переменных | график в виде ступенчатой линии|
|`hist(y, x)` | массивы переменных | гистограмма|
|`bar(x, y)` | массивы переменных | столбчатая диаграмма|

Пример построения графика:
```matlab
x = 1:0.01:50;
y1 = sin(x).*x.^2;
y2 = x.*2.*sin(x)+x.*cos(x);
grid on % отобразить сетку на графике
hold on % удерживать рисунок
plot(x,y1,'r') %нарисовать график функции y1 красным цветом
plot(x, y2, 'b') %нарисовать график функции y2 синим цветом
xlabel('x') %подписать ось абсцисс
ylabel('y') %подписать ось ординат
title('График функции sin(x)*x^2 и ее производной') %добавить заголовок графику
legend('y=sin(x)*x^2', 'y = d/dx(sin(x)*x^2)') %указать на картинке подписи к графикам 
```

![img](matlab-plot.png)

Спецификации линий:

|Тип линии | Тип точки | Цвет|
| --- | --- | ---|
|Непрерывная 	- | Точка 	. | Желтый 	y|
|Штриховая 	-- | Плюс 	+ | Фиолетовый 	m|
|Двойной пунктир 	: | Звездочка 	* | Голубой 	c|
|Штрих-пунктирная 	-. | Кружок 	o | Красный 	r|
|| Крестик 	х | Зеленый 	g|
||| Синий 	b|
||| Белый 	w|
||| Черный 	k|

## Статистические функции.

* `randn(M,N)` вернет матрицу MxN c нормально распределенными элементами с матожиданием 0 и дисперсией 1

* `rand(M,N)` вернет матрицу MxN c равномерно распределенными элементами на отрезке [0, 1]

## Функции решения дифференциальных задач.

```matlab
[t Y] = ode23('f', t, Y0)
[t Y] = ode45('f', t, Y0)
[t Y] = ode23(@f, t, Y0)
[t Y] = ode45(@f, t, Y0)
```

Где f - функция, Y0 - набор начальных условий, t - вектор значений переменной
Пример:

```matlab
function f1 = f(t, y)
    alfa = 0.8; beta = 0.3; c = 0.5; d = 0.2;
    f1 = [((alfa – c * y(2)) * y(1)); ((-beta + d * y(1)) * y(2))];
end
[t Y] = ode45('f', [0 100], [1 2]);
```
